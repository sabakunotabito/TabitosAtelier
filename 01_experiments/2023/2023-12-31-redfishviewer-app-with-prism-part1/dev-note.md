# 【開発日誌】魂の鎧・錬成の軌跡

これは、WPFアプリケーション「RedfishViewer」が、よちよち歩きのプロトタイプから、実用的な「魂の鎧」へと進化を遂げるまでの、全ての苦闘と発見の記録である。
バージョンごとに記されたこの課題日誌は、機能がどのような順序で追加され、どんな壁にぶつかり、そしていかにしてそれを乗り越えていったかの、生々しい証言となるだろう。

---

## ver 0.7：最初の産声と、よちよち歩き

全ての始まり。まずは、Redfishの情報を表示するという、最低限の機能を目指した。しかし、その道のりは最初から平坦ではなかった。

*   **[機能] 検索機能の実装:**
    *   URL入力欄をコンボボックス化し、履歴からの再利用を可能に。
    *   検索キーワードのハイライト機能を追加。
    *   検索履歴をSQLiteデータベースに永続化。
*   **[機能] ノード管理機能の基礎:**
    *   複数の接続先（ノード）を管理するため、一覧にタイトルを付けられるように。
*   **[機能] 比較機能の追加:**
    *   右クリックメニューから、前回取得したコンテンツとの差分を比較する機能を追加。
*   **[UI/UX] 通知機能の模索:**
    *   エラー通知のため、ポップアップやスナックバーを試行錯誤。
*   **[バグ] フォーカスの喪失:**
    *   検索結果をクリックしても、DataGridからフォーカスが外れ、コンテンツが表示されない問題を修正。
*   **[バグ] DataGridの編集:**
    *   ノード一覧のインライン編集が反映されない問題に対し、`CommitEdit`メソッドで強制的に確定させることで解決。
*   **[その他]** アイコン作成、バージョン情報更新。

---

## ver 0.7.1：歩き始めのつまずきと、新たな発見

基本的な機能が揃ったことで、次々と新たな問題が噴出。バグを潰す過程で、より使いやすい道具へのひらめきが生まれた。

*   **[UI/UX] 通知機能の進化:**
    *   表示時間が長すぎるスナックバーを廃止し、より洗練された**トースト通知 (`Notification.Wpf`)** へと切り替え。
*   **[UI/UX] レイアウト改善:**
    *   画面の最大化時にレイアウトが追従しない問題を修正。
    *   URI表示部分の幅をリサイズ可能に。
*   **[機能] 親URIの記録:**
    *   自動検索時、どのURIから派生したリンクなのかを追跡するため、呼び出し元の情報を記録するように。
*   **[バグ] 検索機能の修正:**
    *   `/`が検索にヒットしない不具合を修正。
    *   自動検索を繰り返すと、タイマー処理の不具合で検索不能になる問題を修正。
    *   自動検索開始時に、検索キーワードが意図せずクリアされる問題を修正。
*   **[バグ] エラーハンドリング強化:**
    *   REST APIの応答がJSON形式でない場合でも、JSONとして解析しようとしてエラーになる問題を修正。
    *   HTTPエラー発生時に、ステータスコードも表示するように改善。

---

## ver 0.8：Prismという名の試練と、魂の再構築

このバージョンで、私は最大の挑戦に乗り出す。**Prismフレームワークを導入し、アプリケーションの魂をMVVMパターンで完全に再構築する**という、無謀とも思える旅だ。

*   **[設計] MVVM化への挑戦:**
    *   **Prismフレームワーク**を全面的に導入。全てのコードビハインドをViewModelへと移植。
*   **[機能] セキュリティ強化:**
    *   パスワード情報を、ローカルDBへ**暗号化**して保存する機能を実装。
*   **[機能] REST API機能の拡張:**
    *   `GET`以外の`POST`, `PUT`, `PATCH`, `DELETE`メソッドに対応。
    *   リクエストパラメータや、リクエストヘッダーを自由に編集・追加できるUIを実装。
    *   レスポンスヘッダーも表示できるように。
*   **[機能] 汎用性の向上:**
    *   他のREST APIでも利用できるよう、データベースのスキーマを大幅に拡張。
*   **[UI/UX]** タイムアウト設定、ダークモード時の差分表示カラーリング調整など。
*   **[断念]** `RichText`でのコンテンツ表示、リクエスト中のアニメーション表示は、複雑さから一旦見送った。

---

## ver 0.9 - 0.95：魂の鎧を磨き上げる日々

Prismの基礎を習得し、ここからはひたすら、この「魂の鎧」をより実践的で、より堅牢なものへと磨き上げていく日々が続いた。

*   **[機能] プラグインアーキテクチャの導入:**
    *   ノード一覧のカスタムアクションを、**外部DLLによるプラグイン**で拡張できる仕組みを実装。
    *   サンプルとして、富士通製サーバー(iRMC)への**SSO接続プラグイン**を開発。
*   **[機能] エラーハンドリングの深化:**
    *   自動検索時のエラーを一覧表示。エラー発生時のタイムスタンプやプロキシ使用状況も記録。
    *   エラー一覧からの再リクエスト機能を実装。
*   **[機能] リクエスト機能の強化:**
    *   `@odata.etag`を自動で取得し、`If-Match`ヘッダーにセットする機能を実装。
*   **[UI/UX] レイアウトの全面見直し:**
    *   リクエスト、レスポンス、エラー画面のレイアウトを、よりシンプルで直感的なものに刷新。
    *   ノード管理画面の操作性を改善。（一括登録、保存ボタンの設置など）
*   **[その他]** .NET 8.0へのアップグレード、HAL+JSON形式への対応、多数のバグ修正とリファクタリング。

---

## ver 1.00：旅の終わり、そして始まり

ついに、この神器は一つの完成形へと至る。

*   **[完成]** `README.md`の作成、ライセンスの付与。
*   **[その他]** GitHubのURIをプロパティに反映、ダイアログの挙動改善など、最終的な仕上げ。

---

### 参考：旅の途中で見つけた魔法の断片

*   **プラグイン実装の秘儀:**
    *   [【C#】動的にDLLを読み込んでプラグイン機能を実装する](https://nomux2.net/post-2822/)
*   **PasswordBoxとの契約:**
    *   [PasswordBoxのバリデーションをMVVMアーキテクチャで実装する](https://redwarrior.hateblo.jp/entry/2021/01/12/090000)